```html
button{padding:8px 12px;border-radius:6px}
.green{background:#10b981;color:#fff;border:0}
</style>
</head>
<body>
<h2>หน้าคนขับ (Simple)</h2>
<div>
<label>ชื่อคนขับ: <input id="driverName" /></label>
<button id="refreshBtn">อัปเดตงาน</button>
</div>
<div id="jobs"></div>
<script>
// แทนที่ URL สองตัวนี้ด้วย URL ของคุณ
const READ_URL = 'https://your-gas-webapp-url/exec'; // doGet
const WEBHOOK_URL = 'https://your-gas-webapp-url/exec'; // doPost


async function fetchJobs(){
try{
const res = await fetch(READ_URL);
const json = await res.json();
if(json.status === 'success') renderJobs(json.jobs);
}catch(e){ console.error(e); }
}


function renderJobs(jobs){
const el = document.getElementById('jobs');
el.innerHTML = '';
jobs.forEach(job => {
const div = document.createElement('div');
div.className = 'card';
div.innerHTML = `
<div>รหัสงาน: <b>${job.id}</b></div>
<div>${job.from || ''} → ${job.to || ''}</div>
<div>${job.note || ''}</div>
<div>สถานะ: ${job.status || 'รอดำเนินการ'}</div>
<div style="margin-top:8px"><button class='acceptBtn green' data-id='${job.id}'>รับงาน</button></div>
`;
el.appendChild(div);
});


document.querySelectorAll('.acceptBtn').forEach(btn => {
btn.addEventListener('click', async (ev)=>{
const id = ev.target.dataset.id;
const driver = document.getElementById('driverName').value.trim();
if(!driver){ alert('กรุณากรอกชื่อคนขับ'); return; }
try{
const resp = await fetch(WEBHOOK_URL, {
method: 'POST', headers: {'Content-Type':'application/json'},
body: JSON.stringify({ id: String(id), driver })
});
const j = await resp.json();
if(j.status === 'success'){ alert('รับงานสำเร็จ'); fetchJobs(); }
else if(j.status === 'not_found'){ alert('ไม่พบรหัสงาน'); }
else alert(JSON.stringify(j));
}catch(e){ alert(e.toString()); }
});
});
}


document.getElementById('refreshBtn').addEventListener('click', fetchJobs);
fetchJobs();
</script>
</body>
</html>
